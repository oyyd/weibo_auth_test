<!DOCTYPE html>
<html xmlns:wb="http://open.weibo.com/wb">
  <head>
    <title>Test weibo auth</title>
    <script src="http://tjs.sjs.sinajs.cn/open/api/js/wb.js?appkey=1326358006" type="text/javascript" charset="utf-8"></script>
  </head>
  <body>
    <h1>Test weibo auth</h1>
    <wb:login-button id="wb_connect_btn">登录按钮</wb:login-button>
    <a id="auth-link" href="" target="_Blank">Go to weibo login</a>
    <script>
      function authorizeTarget(clientId){
        return "https://api.weibo.com/oauth2/authorize?client_id=" + clientId + "&redirect_uri=http://testauth.oyyd.net/response&response_type=code";
      }
      document.querySelector('#auth-link').href = authorizeTarget("1326358006");

      WB2.anyWhere(function(W){
          W.widget.connectButton({
              id: "wb_connect_btn", 
              type:"3,4",
              callback : {
                  login:function(o){  //登录后的回调函数
                    console.log('login');
                  },  
                  logout:function(){  //退出后的回调函数
                    console.log('logout');                    
                  }
              }
          });
      });
    </script>
  </body>
</html>